# ğŸ—ï¸ Grafana Monitoring Architecture

## System Architecture Diagram

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USER INTERACTIONS                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                    â”‚                      â”‚
            â”‚ Browse             â”‚ API Calls            â”‚ Run Tests
            â†“                    â†“                      â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Grafana UI   â”‚   â”‚   server.py    â”‚    â”‚ chaos_test_     â”‚
   â”‚  localhost:3000â”‚   â”‚ localhost:8001 â”‚    â”‚   server.py     â”‚
   â”‚                â”‚   â”‚                â”‚    â”‚                 â”‚
   â”‚ â€¢ Dashboards   â”‚   â”‚ â€¢ REST API     â”‚    â”‚ â€¢ 100 requests  â”‚
   â”‚ â€¢ Panels       â”‚   â”‚ â€¢ /products    â”‚    â”‚ â€¢ Good/Bad mix  â”‚
   â”‚ â€¢ Queries      â”‚   â”‚ â€¢ /users       â”‚    â”‚ â€¢ Statistics    â”‚
   â”‚ â€¢ Alerts       â”‚   â”‚ â€¢ /health      â”‚    â”‚                 â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                 â”‚                          â”‚
           â”‚ Query           â”‚ Expose /metrics          â”‚ HTTP Requests
           â”‚                 â”‚                          â”‚
           â†“                 â†“                          â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                    DATA LAYER                              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                                    â”‚
           â”‚                                    â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â†“â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†“â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   Prometheus     â”‚              â”‚      Loki         â”‚
  â”‚ localhost:9090   â”‚              â”‚  localhost:3100   â”‚
  â”‚                  â”‚              â”‚                   â”‚
  â”‚ â€¢ Metrics Store  â”‚              â”‚ â€¢ Log Store       â”‚
  â”‚ â€¢ Time Series DB â”‚              â”‚ â€¢ Log Aggregation â”‚
  â”‚ â€¢ PromQL         â”‚              â”‚ â€¢ LogQL           â”‚
  â”‚ â€¢ Scraping       â”‚              â”‚                   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                                    â”‚
           â”‚ Scrape                             â”‚ Ship Logs
           â”‚ Every 15s                          â”‚
           â”‚                                    â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  /metrics        â”‚              â”‚    Promtail       â”‚
  â”‚  Endpoint        â”‚              â”‚  localhost:9080   â”‚
  â”‚                  â”‚              â”‚                   â”‚
  â”‚ â€¢ Counter        â”‚              â”‚ â€¢ File Watcher    â”‚
  â”‚ â€¢ Gauge          â”‚              â”‚ â€¢ JSON Parser     â”‚
  â”‚ â€¢ Histogram      â”‚              â”‚ â€¢ Label Extractor â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â”‚ Read Files
                                               â”‚
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚   logs/           â”‚
                                    â”‚ *.log files       â”‚
                                    â”‚                   â”‚
                                    â”‚ â€¢ JSON structured â”‚
                                    â”‚ â€¢ Rotating        â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Details

### 1. Grafana (Port 3000)
```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         GRAFANA                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Purpose:                         â”‚
â”‚ â€¢ Visualization & Dashboards     â”‚
â”‚ â€¢ Query interface                â”‚
â”‚ â€¢ Alerting                       â”‚
â”‚ â€¢ User management                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Features:                        â”‚
â”‚ âœ“ Auto-provisioned datasources  â”‚
â”‚ âœ“ Pre-built dashboards          â”‚
â”‚ âœ“ Real-time updates (5s)        â”‚
â”‚ âœ“ Multiple visualization types  â”‚
â”‚ âœ“ Threshold alerts              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Access:                          â”‚
â”‚ URL: http://localhost:3000       â”‚
â”‚ User: admin                      â”‚
â”‚ Pass: admin123                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Prometheus (Port 9090)
```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        PROMETHEUS                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Purpose:                         â”‚
â”‚ â€¢ Metrics collection             â”‚
â”‚ â€¢ Time-series database           â”‚
â”‚ â€¢ Scraping endpoints             â”‚
â”‚ â€¢ Data retention                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Metrics Collected:               â”‚
â”‚ â€¢ http_requests_total            â”‚
â”‚ â€¢ http_request_duration_seconds  â”‚
â”‚ â€¢ system_cpu_usage_percent       â”‚
â”‚ â€¢ system_memory_usage_percent    â”‚
â”‚ â€¢ products_low_stock_total       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Configuration:                   â”‚
â”‚ â€¢ Scrape interval: 15s           â”‚
â”‚ â€¢ Targets: localhost:8000/8001   â”‚
â”‚ â€¢ Storage: TSDB                  â”‚
â”‚ â€¢ Query: PromQL                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Loki (Port 3100)
```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           LOKI                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Purpose:                         â”‚
â”‚ â€¢ Log aggregation                â”‚
â”‚ â€¢ Log storage                    â”‚
â”‚ â€¢ Log querying (LogQL)           â”‚
â”‚ â€¢ Label-based indexing           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Features:                        â”‚
â”‚ âœ“ Like Prometheus for logs       â”‚
â”‚ âœ“ Efficient storage              â”‚
â”‚ âœ“ Label indexing                 â”‚
â”‚ âœ“ JSON log parsing               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Integration:                     â”‚
â”‚ â€¢ Receives from Promtail         â”‚
â”‚ â€¢ Queries from Grafana           â”‚
â”‚ â€¢ Structured logs (JSON)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. Promtail (Port 9080)
```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         PROMTAIL                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Purpose:                         â”‚
â”‚ â€¢ Log file watching              â”‚
â”‚ â€¢ Log shipping to Loki           â”‚
â”‚ â€¢ Log parsing & labeling         â”‚
â”‚ â€¢ Pipeline processing            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Process:                         â”‚
â”‚ 1. Watch logs/*.log files        â”‚
â”‚ 2. Parse JSON structure          â”‚
â”‚ 3. Extract labels                â”‚
â”‚ 4. Ship to Loki                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Configuration:                   â”‚
â”‚ â€¢ Path: /var/log/app/*.log       â”‚
â”‚ â€¢ Format: JSON                   â”‚
â”‚ â€¢ Labels: level, logger          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5. E-commerce API (Port 8001)
```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       E-COMMERCE API             â”‚
â”‚         (server.py)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Endpoints:                       â”‚
â”‚ â€¢ GET  /                         â”‚
â”‚ â€¢ GET  /products                 â”‚
â”‚ â€¢ GET  /users                    â”‚
â”‚ â€¢ GET  /health                   â”‚
â”‚ â€¢ GET  /ready                    â”‚
â”‚ â€¢ GET  /startup                  â”‚
â”‚ â€¢ GET  /error                    â”‚
â”‚ â€¢ GET  /metrics (Prometheus)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Grafana Endpoints:               â”‚
â”‚ â€¢ GET  /grafana/health           â”‚
â”‚ â€¢ POST /grafana/search           â”‚
â”‚ â€¢ POST /grafana/query            â”‚
â”‚ â€¢ POST /grafana/annotations      â”‚
â”‚ â€¢ GET  /grafana/dashboard        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Logging:                         â”‚
â”‚ â€¢ Structlog library              â”‚
â”‚ â€¢ JSON format                    â”‚
â”‚ â€¢ Console + File                 â”‚
â”‚ â€¢ Context binding                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Diagram

### Metrics Flow
```text
API Request
    â”‚
    â†“
[Middleware]
    â”‚
    â”œâ”€â†’ Log to structlog â”€â”€â†’ logs/structlog_ecommerce.log
    â”‚                               â”‚
    â†“                               â†“
[Update Metrics]              [Promtail reads]
    â”‚                               â”‚
    â†“                               â†“
[Counter.inc()]               [Ships to Loki]
[Gauge.set()]                       â”‚
[Histogram.observe()]               â†“
    â”‚                         [Loki stores]
    â†“                               â”‚
[Expose /metrics]                   â†“
    â”‚                         [Grafana queries]
    â†“
[Prometheus scrapes every 15s]
    â”‚
    â†“
[Prometheus stores in TSDB]
    â”‚
    â†“
[Grafana queries with PromQL]
    â”‚
    â†“
[Dashboard updates (5s refresh)]
    â”‚
    â†“
[User sees visualization]
```

### Log Flow
```text
Application Event
    â”‚
    â†“
[Structlog Logger]
    â”‚
    â”œâ”€â†’ Console Output (colored)
    â”‚
    â””â”€â†’ File Output (JSON)
            â”‚
            â†“
      logs/structlog_ecommerce.log
            â”‚
            â†“
      [Promtail watches file]
            â”‚
            â†“
      [Parse JSON structure]
            â”‚
            â”œâ”€â†’ Extract: level, logger, message
            â”œâ”€â†’ Extract: request_id, path, method
            â””â”€â†’ Extract: duration, status
                    â”‚
                    â†“
            [Add labels for indexing]
                    â”‚
                    â†“
            [Ship to Loki API]
                    â”‚
                    â†“
            [Loki indexes by labels]
                    â”‚
                    â†“
            [Loki stores log entries]
                    â”‚
                    â†“
            [Grafana Explore tab]
                    â”‚
                    â†“
            [LogQL queries]
                    â”‚
                    â†“
            [User searches logs]
```

## Dashboard Panel Connections

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              E-COMMERCE API MONITORING DASHBOARD             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                       â”‚
        â†“                                       â†“
[Prometheus Data Source]              [Loki Data Source]
        â”‚                                       â”‚
        â”œâ”€â”€â†’ Panel 1: HTTP Request Rate        â””â”€â”€â†’ (Future: Log viewer)
        â”‚    Query: rate(http_requests_total[1m])
        â”‚
        â”œâ”€â”€â†’ Panel 2: Total Requests
        â”‚    Query: sum(http_requests_total)
        â”‚
        â”œâ”€â”€â†’ Panel 3: CPU Usage
        â”‚    Query: system_cpu_usage_percent
        â”‚
        â”œâ”€â”€â†’ Panel 4: Request Duration
        â”‚    Query: histogram_quantile(0.95, ...)
        â”‚
        â”œâ”€â”€â†’ Panel 5: Memory Usage
        â”‚    Query: system_memory_usage_percent
        â”‚
        â”œâ”€â”€â†’ Panel 6: Low Stock Products
        â”‚    Query: products_low_stock_total
        â”‚
        â””â”€â”€â†’ Panel 7: Requests by Status
             Query: sum(...) by (status)
```

## Docker Network Topology

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Docker Network: monitoring                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚               â”‚
        â†“               â†“               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Grafana     â”‚ â”‚ Prometheus   â”‚ â”‚    Loki      â”‚
â”‚ Container    â”‚ â”‚  Container   â”‚ â”‚  Container   â”‚
â”‚              â”‚ â”‚              â”‚ â”‚              â”‚
â”‚ Volume:      â”‚ â”‚ Volume:      â”‚ â”‚              â”‚
â”‚ grafana-data â”‚ â”‚ prometheus-  â”‚ â”‚              â”‚
â”‚              â”‚ â”‚   data       â”‚ â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                â”‚                â”‚
       â”‚ HTTP           â”‚ HTTP           â”‚ HTTP
       â”‚                â”‚                â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                host.docker.internal
                        â”‚
                        â†“
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚  Host OS     â”‚
                â”‚              â”‚
                â”‚ â€¢ server.py  â”‚
                â”‚   :8001      â”‚
                â”‚ â€¢ starter_   â”‚
                â”‚   code.py    â”‚
                â”‚   :8000      â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Deployment Sequence

```text
Step 1: Start Containers
    â”‚
    â”œâ”€â†’ docker-compose up -d
    â”‚       â”‚
    â”‚       â”œâ”€â†’ Pull images (if needed)
    â”‚       â”œâ”€â†’ Create network
    â”‚       â”œâ”€â†’ Create volumes
    â”‚       â”œâ”€â†’ Start Prometheus
    â”‚       â”œâ”€â†’ Start Loki
    â”‚       â”œâ”€â†’ Start Promtail
    â”‚       â””â”€â†’ Start Grafana
    â”‚
    â†“
Step 2: Provision Grafana
    â”‚
    â”œâ”€â†’ Read datasources.yml
    â”‚   â””â”€â†’ Create Prometheus datasource
    â”‚   â””â”€â†’ Create Loki datasource
    â”‚
    â”œâ”€â†’ Read dashboards.yml
    â”‚   â””â”€â†’ Load ecommerce-dashboard.json
    â”‚
    â†“
Step 3: Start Application
    â”‚
    â”œâ”€â†’ python server.py
    â”‚   â””â”€â†’ Expose /metrics endpoint
    â”‚   â””â”€â†’ Write logs to files
    â”‚
    â†“
Step 4: Data Collection Begins
    â”‚
    â”œâ”€â†’ Prometheus scrapes /metrics (15s)
    â”œâ”€â†’ Promtail ships logs to Loki
    â”‚
    â†“
Step 5: Visualization Ready
    â”‚
    â””â”€â†’ Open http://localhost:3000
        â””â”€â†’ View dashboard
```

---

**This architecture provides production-grade observability!** ğŸ“ŠğŸ—ï¸âœ¨
